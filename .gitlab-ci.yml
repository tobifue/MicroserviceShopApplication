    image: node:latest

    stages:
      - build
      - test
      - release

    cache:
      paths:
        - implementation/cart/container/node_modules/

    install_dependencies:
      stage: build
      script:
        - npm install
      artifacts:
        paths:
        - implementation/cart/container/node_modules/

    cart_testing:
      stage: test
      artifacts:
        paths:
        - implementation/cart/container/
      script: 
        - cd implementation/cart/container
        - npm install -g mocha
        - npm install
        - nohup npm start &
        - npm run test

      release:
        stage: release
        image: registry.gitlab.com/gitlab-org/release-cli
        when: manual
        # We recommend the use of `rules` to prevent these pipelines
        # from running. See the notes section below for details.
        rules:
          - if: $CI_COMMIT_TAG
            when: never

        script:
          - >
            release-cli create --name release-branch-$CI_JOB_ID --description release-branch-$CI_COMMIT_REF_NAME-$CI_JOB_ID
            --tag-name job-$CI_JOB_ID --ref $CI_COMMIT_SHA
            --assets-link '{"name":"Asset1","url":"https://<domain>/some/location/1","link_type":"other","filepath":"xzy"}'
            --assets-link '{"name":"Asset2","url":"https://<domain>/some/location/2"}'
            --milestone "v1.0.0" --milestone "v1.0.0-rc"
            --released-at "2020-06-30T07:00:00Z"
